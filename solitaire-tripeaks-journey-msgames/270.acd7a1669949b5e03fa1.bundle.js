"use strict";(self.webpackChunkgame_core=self.webpackChunkgame_core||[]).push([[270],{94:function(t,e,i){i.r(e),i.d(e,{default:function(){return Fi}});var n=i(0),a=i(7),s=a.Z.EFFECTS,r=s.KEY,o=s.FRAME,h={CONFETTI_HEXAGON:{KEY:"confetti-hexagon-animation",TEXTURE:r,PREFIX:o.FX_CONFETTI_HEXAGON,FRAME_RATE:8,END:5,ZERO_PAD:0},CONFETTI_STAR_X:{KEY:"confetti-star-x",TEXTURE:r,PREFIX:o.ANIMATION_STAR_X,FRAME_RATE:4,END:4,ZERO_PAD:0},CONFETTI_STAR_Y:{KEY:"confetti-star-y",TEXTURE:r,PREFIX:o.ANIMATION_STAR_Y,FRAME_RATE:4,END:4,ZERO_PAD:0},RIBBON_A:{KEY:"animation-ribbon-a",TEXTURE:r,PREFIX:o.PREFIX_ANIMATION_RIBBON_CONFETTI_A,FRAME_RATE:16,END:3,ZERO_PAD:0},RIBBON_B:{KEY:"animation-ribbon-b",TEXTURE:r,PREFIX:o.PREFIX_ANIMATION_RIBBON_CONFETTI_B,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_C:{KEY:"animation-ribbon-c",TEXTURE:r,PREFIX:o.PREFIX_ANIMATION_RIBBON_CONFETTI_C,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_D:{KEY:"animation-ribbon-d",TEXTURE:r,PREFIX:o.PREFIX_ANIMATION_RIBBON_CONFETTI_D,FRAME_RATE:16,END:4,ZERO_PAD:0}},c=h.CONFETTI_HEXAGON,m=c.KEY,l=c.TEXTURE,u=c.FRAME_RATE,d=c.END,f=c.PREFIX,p=c.ZERO_PAD,v=function(t){function e(e){var i={repeat:-1,frameRate:u,frames:e.generateFrameNames(l,{prefix:f,end:d,zeroPad:p}),yoyo:!0,showOnStart:!0};return t.call(this,e,m,i)||this}return(0,n.Z)(e,t),e}(Phaser.Animations.Animation),E=i(53),g=i(87),A=i(72),y=i(84),T=i(78),P=i(86),x=i(1),R=i(10),C=a.Z.EFFECTS,F=C.KEY,b=C.FRAME,Z=function(t){function e(e,i){var n;return(n=t.call(this,e,0,0,F,b.COIN)||this).onUpdate=void 0,n.onComplete=void 0,n.positions=void 0,n.eatAnimation=void 0,n.setWorldSize(16.5,15.5),n.positions=i,n.setDepth(R.Z.PRIORITY),n.createAnimation(),n.scene.add.existing((0,x.Z)(n)),n}(0,n.Z)(e,t);var i=e.prototype;return i.createAnimation=function(){var t=this,e=1/GameCore.ImageScale,i=this.positions,n=i.from,a=i.to;this.eatAnimation=this.scene.add.tween({targets:this,duration:1125,ease:"Circ.easeInOut",paused:!0,props:{x:{from:n.x,to:a.x},y:{from:n.y,to:a.y},scale:{from:e,to:e}},onUpdate:function(){"function"===typeof t.onUpdate&&t.onUpdate()},onComplete:function(){t.destroy(),"function"===typeof t.onComplete&&t.onComplete()}})},i.run=function(){this.eatAnimation.play()},e}(Phaser.GameObjects.Image),O=a.Z.EFFECTS,S=O.KEY,_=O.FRAME,I=function(t){function e(e,i,n){var a;return(a=t.call(this,e,S,_.COIN)||this).onUpdate=void 0,a.onComplete=void 0,a.emitter=void 0,a.circle=void 0,a.createEmitters(i,n),a.setActive(!1),a.setVisible(!1),a.scene.add.existing((0,x.Z)(a)),a}(0,n.Z)(e,t);var i=e.prototype;return i.createEmitters=function(t,e){var i=this,n=1/GameCore.ImageScale;this.emitter=this.createEmitter({on:!1,frame:_.COIN,angle:{min:0,max:360},speed:{min:240,max:340},scale:{start:n,end:n},lifespan:5e3,emitCallback:function(t){t.accelerationX=-t.velocityX/1.2,t.accelerationY=-t.velocityY/1.2},deathCallback:function(n){var a=new Z(i.scene,{from:{x:n.x,y:n.y},to:{x:t,y:e}});a.onUpdate=function(){"function"===typeof i.onUpdate&&i.onUpdate()},a.onComplete=function(){"function"===typeof i.onComplete&&i.onComplete()},a.setDepth(R.Z.ON_TOP),a.run()}})},i.explode=function(t,e,i){this.setActive(!0),this.setVisible(!0),this.circle||(this.circle=new Phaser.Geom.Circle(e,i,100)),this.emitter.deathZone=new Phaser.GameObjects.Particles.Zones.DeathZone(this.circle,!1),this.emitter.explode(t,e,i)},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),N=a.Z.EFFECTS,w=N.KEY,B=N.FRAME,M=function(t){function e(e){var i;return(i=t.call(this,e,w,B.FX_STAR_YELLOW)||this).emitter=void 0,i.scene=e,i.createEmitters(),i.setActive(!1),i.setVisible(!1),i.scene.add.existing((0,x.Z)(i)),i}(0,n.Z)(e,t);var i=e.prototype;return i.createEmitters=function(){var t=1/GameCore.ImageScale;this.emitter=this.createEmitter({on:!1,frame:B.FX_STAR_YELLOW,alpha:{start:1,end:.8},speed:{min:50,max:150},scale:{start:.4*t,end:1*t},lifespan:{min:600,max:1500}})},i.explode=function(t,e,i){this.setActive(!0),this.setVisible(!0),this.emitter.explode(t,e,i)},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),Y=a.Z.EFFECTS,X=Y.KEY,k=Y.FRAME,D=function(t){function e(e){var i;return(i=t.call(this,e,X,k.FX_COMET)||this).emitter=void 0,i.scene=e,i.createEmitters(),i.setActive(!1),i.setVisible(!1),i.scene.add.existing((0,x.Z)(i)),i}(0,n.Z)(e,t);var i=e.prototype;return i.createEmitters=function(){var t=1/GameCore.ImageScale;this.emitter=this.createEmitter({on:!1,frame:k.FX_COMET,alpha:{start:1,end:.8},speed:{min:40,max:80},scale:{start:.4*t,end:.7*t},lifespan:{min:400,max:600}})},i.explode=function(t,e,i){this.revive(),this.emitter.explode(t,e,i)},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),G=i(54),K=a.Z.EFFECTS,L=K.KEY,j=K.FRAME,U=function(t){function e(e){var i;return(i=t.call(this,e)||this).coinGroup=void 0,i.containerGroup=void 0,i.startsExplosive=void 0,i.startsExplosiveSmall=void 0,i.startsExplosiveSmallTimer=void 0,i.gravity=300,i.setVisible(!0),i.coinGroup=i.scene.add.group({defaultKey:L,defaultFrame:j.COIN}),i.containerGroup=i.scene.add.group({classType:Phaser.GameObjects.Container}),i.startsExplosive=new M(e),i.startsExplosive.setDepth(R.Z.ON_TOP+1),i.startsExplosiveSmall=new D(e),i.startsExplosiveSmall.setDepth(R.Z.ON_TOP+1),i.scene.add.existing((0,x.Z)(i)),i}(0,n.Z)(e,t);var i=e.prototype;return i.createConfigOne=function(t,e,i){var n=this,a=t/300,s=new Phaser.Math.Vector2(0,0),r=new Phaser.Math.Vector2(0,-t),o=i?-1:1,h=Phaser.Math.RND.between(-90,90),c=(h+90)/180*180*(h<0?1:(300-Math.abs(h))/300)*a,m=Phaser.Math.RND.between(20,c+20),l=new Phaser.Math.Vector2(1,0);l.setAngle(h*Math.PI/180);var u=Phaser.Math.RND.between(-Math.abs(h)-15,15-Math.abs(h)),d=m*(100-Math.abs(h))/100*a,f=Phaser.Math.RND.between(.2*d,d),p=new Phaser.Math.Vector2(1,0);p.setAngle(u*Math.PI/180);var v=o*l.x*m,E=l.y*m,g=o*p.x*f,A=p.y*f-t,y=new Phaser.Math.Vector2(v,E),T=new Phaser.Math.Vector2(g,A),P=new Phaser.Curves.CubicBezier(s,y,T,r),x=Phaser.Math.RND.between(1500+3*m,2e3+3*m),R=this.coinGroup.get(0,0);return R.revive(),R.setRotation(-e.rotation),R.setWorldSize(24,22),e.add(R),{from:0,to:1,duration:x,ease:"Sine.In",onUpdate:function(t){var e=P.getPointAt(t.getValue());R.setPosition(e.x,e.y)},onComplete:function(t){if(R.kill(),!(t.totalProgress<1)&&(n.scene.audio.playSound(G.Z.DIAMONDS_EAT),!n.startsExplosiveSmallTimer||n.startsExplosiveSmallTimer.hasDispatched)){n.startsExplosiveSmallTimer=n.scene.time.delayedCall(100,(function(){return null}));var e=R.getWorldPosition();n.startsExplosiveSmall.explode(10,e.x,e.y)}}}},i.explode=function(t,e,i,n,a){var s,r=this;if(t<=0)return[];this.startsExplosive.explode(30,e,i);var o=new Phaser.Math.Vector2(n-e,a-i),h=o.length(),c=this.containerGroup.get(e,i);c.setRotation(o.angle()+Math.PI/2),c.revive(),this.add(c);for(var m=void 0,l=0,u=[],d=0;d<t;d++){var f=this.createConfigOne(h,c,d%2===0),p=this.scene.tweens.addCounter(f);u.push(p),f.duration>l&&(l=f.duration,m=p)}var v=function(){var t,e;u.forEach((function(t){t.complete()})),null==(t=r.startsExplosive.emitters.getAt(0))||t.killAll(),null==(e=r.startsExplosiveSmall.emitters.getAt(0))||e.killAll(),c.kill()};return null==(s=m)||s.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){c.kill(),r.scene.events.off("sleep",v)})),this.scene.events.once("sleep",v),u},e}(Phaser.GameObjects.Container),V=U,W=a.Z.EFFECTS,z=W.KEY,H=W.FRAME,q=function(t){function e(e){var i;return(i=t.call(this,e,z,H.FX_STAR_YELLOW)||this).emitZone=void 0,i.emitter=void 0,i.createEmitZone(),i.scene.add.existing((0,x.Z)(i)),i}(0,n.Z)(e,t);var i=e.prototype;return i.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},i.createEmitters=function(){var t=1/GameCore.ImageScale;this.emitter=this.createEmitter({on:!1,frame:H.FX_COMET,emitZone:{source:this.emitZone,type:"random"},speed:20,timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:2*t,end:.1*t,ease:Phaser.Math.Easing.Expo.Out},lifespan:2666})},i.run=function(t,e,i,n,a){this.stop(),this.reset(),this.emitZone.setSize(n,a),this.emitZone.setPosition(e-n/2,i-a/2),this.emitter.setQuantity(t),this.emitter.start()},i.explode=function(t,e,i){this.emitter||this.reset(),this.emitter.explode(t,e,i)},i.stop=function(){var t,e;null==(t=this.emitter)||t.killAll(),null==(e=this.emitter)||e.stop()},i.reset=function(){this.createEmitters()},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),Q=function(t){function e(e){var i;return(i=t.call(this,e)||this).lastChange=0,i.currentFrame=-1,i.isYoyo=!1,i.confettiAnim=void 0,i.lastChange=0,i.confettiAnim=window.game.anims.get(h.CONFETTI_HEXAGON.KEY),i}return(0,n.Z)(e,t),e.prototype.update=function(e,i,n){var a=t.prototype.update.call(this,e,i,n);return this.lastChange+=e,this.lastChange>=this.confettiAnim.msPerFrame&&(this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1),this.currentFrame>=this.confettiAnim.frames.length&&(this.isYoyo=!0,this.currentFrame-=2),this.frame=this.confettiAnim.frames[this.currentFrame].frame,this.lastChange-=this.confettiAnim.msPerFrame),a},e}(Phaser.GameObjects.Particles.Particle),$=a.Z.EFFECTS,J=$.KEY,tt=$.FRAME,et=function(t){function e(e){var i;return(i=t.call(this,e,J,tt.FX_CONFETTI_HEXAGON+"0")||this).emitter=void 0,i.setActive(!1),i.scene.add.existing((0,x.Z)(i)),i}(0,n.Z)(e,t);var i=e.prototype;return i.createEmitters=function(){var t=1/GameCore.ImageScale,e={on:!1,particleBringToTop:!0,particleClass:Q,tint:[14223402,1021804,5420529,16702052],timeScale:1,reserve:20,frequency:100,maxParticles:2,gravityY:-5,speedX:{min:-100,max:100},speedY:{min:50,max:150},alpha:{start:1,end:.2},rotate:{start:0,end:1080},scale:{min:1*t,max:.3*t},angle:{min:10,max:170},lifespan:{min:8e3,max:12e3}};this.emitter=this.createEmitter(e)},i.run=function(t,e,i){this.setActive(!0),this.stop(),this.reset(),this.emitter.setQuantity(t),this.emitter.setPosition(e,i),this.emitter.start()},i.stop=function(){var t,e;null==(t=this.emitter)||t.killAll(),null==(e=this.emitter)||e.stop()},i.reset=function(){this.createEmitters()},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),it=i(77),nt=i(12),at=a.Z.EFFECTS,st=at.KEY,rt=at.FRAME,ot=function(t){function e(e,i){var n;return(n=t.call(this,e,st,rt.BLANK)||this).config=void 0,n.emitter=void 0,n.config=i||{},n.scene.add.existing((0,x.Z)(n)),n}(0,n.Z)(e,t);var i=e.prototype;return i.createEmitters=function(){var t=rt.FX_CONFETTI_SMALL_1,e=rt.FX_CONFETTI_SMALL_2,i=rt.FX_CONFETTI_SMALL_3,n=rt.FX_CONFETTI_SMALL_4,a=1/GameCore.ImageScale,s={on:!1,particleBringToTop:!0,frame:[t,e,i,n],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,alpha:{start:1,end:.8},scale:{min:.6*a,max:1*a},lifespan:{min:2e3,max:3e3},speedX:{min:-100,max:100},speedY:{min:-20,max:-40},gravityY:50,rotate:{start:-1080,end:0},angle:{min:110,max:145}},r=(0,nt.TS)(s,this.config);this.emitter=this.createEmitter(r)},i.run=function(t,e,i){this.stop(),this.emitter.setQuantity(t),this.emitter.setPosition(e,i),this.emitter.start()},i.explode=function(t,e,i){this.emitter||this.createEmitters(),this.emitter.explode(t,e,i)},i.stop=function(){var t,e,i;null==(t=this.emitter)||t.killAll(),null==(e=this.emitter)||e.stop(),null==(i=this.emitter)||i.remove(),this.createEmitters()},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),ht=a.Z.DEFAULT,ct=ht.KEY,mt=ht.FRAME,lt=function(t){function e(e){var i;return(i=t.call(this,e,ct,mt.ICON_DIAMOND)||this).emitter=void 0,i.createEmitters(),i.setActive(!1),i.setVisible(!1),i.scene.add.existing((0,x.Z)(i)),i}(0,n.Z)(e,t);var i=e.prototype;return i.createEmitters=function(){var t=1/GameCore.ImageScale;this.emitter=this.createEmitter({on:!1,frame:mt.ICON_DIAMOND,gravityY:160,angle:{min:-180,max:0},speed:{min:50,max:200},scale:{min:.3*t,max:1*t},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},lifespan:1500})},i.explode=function(t,e,i){this.setActive(!0),this.setVisible(!0),this.emitter.explode(t,e,i)},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),ut=i(80),dt=a.Z.EFFECTS,ft=dt.KEY,pt=dt.FRAME,vt=function(t){function e(e){var i;return(i=t.call(this,e,ft,pt.FX_SPARK)||this).deathZone=void 0,i.emitter=void 0,i.createDeathZone(),i.createEmitters(),i.setActive(!1),i.setVisible(!1),i.scene.add.existing((0,x.Z)(i)),i}(0,n.Z)(e,t);var i=e.prototype;return i.createDeathZone=function(){this.deathZone=new Phaser.Geom.Circle},i.createEmitters=function(){var t=1/GameCore.ImageScale;this.emitter=this.createEmitter({on:!1,frame:pt.ANIMATION_STAR_X+"1",speed:{min:85,max:150},alpha:{start:1,end:0},tint:[8443204,2928867,12013036,16376097,15285798],scale:t/2,deathZone:{source:this.deathZone,type:"onLeave"},lifespan:1e3})},i.explode=function(t,e,i,n){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=n,this.deathZone.setPosition(e,i),this.emitter.explode(t,e,i)},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),Et=i(8),gt=h.RIBBON_A,At=gt.KEY,yt=gt.TEXTURE,Tt=gt.FRAME_RATE,Pt=gt.END,xt=gt.PREFIX,Rt=gt.ZERO_PAD,Ct=function(t){function e(e){var i={repeat:-1,frameRate:Tt,frames:e.generateFrameNames(yt,{prefix:xt,end:Pt,zeroPad:Rt,start:1}),yoyo:!0,showOnStart:!0};return t.call(this,e,At,i)||this}return(0,n.Z)(e,t),e}(Phaser.Animations.Animation),Ft=h.RIBBON_B,bt=Ft.KEY,Zt=Ft.TEXTURE,Ot=Ft.FRAME_RATE,St=Ft.END,_t=Ft.PREFIX,It=Ft.ZERO_PAD,Nt=function(t){function e(e){var i={repeat:-1,frameRate:Ot,frames:e.generateFrameNames(Zt,{prefix:_t,end:St,zeroPad:It,start:1}),yoyo:!0,showOnStart:!0};return t.call(this,e,bt,i)||this}return(0,n.Z)(e,t),e}(Phaser.Animations.Animation),wt=h.RIBBON_C,Bt=wt.KEY,Mt=wt.TEXTURE,Yt=wt.FRAME_RATE,Xt=wt.END,kt=wt.PREFIX,Dt=wt.ZERO_PAD,Gt=function(t){function e(e){var i={repeat:-1,frameRate:Yt,frames:e.generateFrameNames(Mt,{prefix:kt,end:Xt,zeroPad:Dt,start:1}),yoyo:!0,showOnStart:!0};return t.call(this,e,Bt,i)||this}return(0,n.Z)(e,t),e}(Phaser.Animations.Animation),Kt=h.RIBBON_D,Lt=Kt.KEY,jt=Kt.TEXTURE,Ut=Kt.FRAME_RATE,Vt=Kt.END,Wt=Kt.PREFIX,zt=Kt.ZERO_PAD,Ht=function(t){function e(e){var i={repeat:-1,frameRate:Ut,frames:e.generateFrameNames(jt,{prefix:Wt,end:Vt,zeroPad:zt,start:1}),yoyo:!0,showOnStart:!0};return t.call(this,e,Lt,i)||this}return(0,n.Z)(e,t),e}(Phaser.Animations.Animation),qt=h.CONFETTI_STAR_X,Qt=qt.KEY,$t=qt.TEXTURE,Jt=qt.FRAME_RATE,te=qt.END,ee=qt.PREFIX,ie=qt.ZERO_PAD,ne=function(t){function e(e){var i={repeat:-1,frameRate:Jt,frames:e.generateFrameNames($t,{prefix:ee,end:te,zeroPad:ie,start:1}),yoyo:!0,showOnStart:!0};return t.call(this,e,Qt,i)||this}return(0,n.Z)(e,t),e}(Phaser.Animations.Animation),ae=h.CONFETTI_STAR_Y,se=ae.KEY,re=ae.TEXTURE,oe=ae.FRAME_RATE,he=ae.END,ce=ae.PREFIX,me=ae.ZERO_PAD,le=function(t){function e(e){var i={repeat:-1,frameRate:oe,frames:e.generateFrameNames(re,{prefix:ce,end:he,zeroPad:me,start:1}),showOnStart:!0};return t.call(this,e,se,i)||this}return(0,n.Z)(e,t),e}(Phaser.Animations.Animation);function ue(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"===typeof t)return de(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return de(t,e)}(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function de(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var fe=function(t){function e(e){var i;return(i=t.call(this,e)||this).scene=void 0,i.ribbon=void 0,i.graphics=void 0,i.colorUse=void 0,i.lastChange=void 0,i.currentFrame=void 0,i.isYoyo=void 0,i.isGravityChanged=void 0,i.dtCount=void 0,i.points=void 0,i.scene=e.manager.scene,i.points=new Array(10).fill(null).map((function(){return{x:0,y:0}})),i.isYoyo=!1,i.isGravityChanged=!1,i.lastChange=0,i.currentFrame=-1,i.dtCount=0,i.createGraphics(),i.randomRibbonUsedWhenFall(),i}(0,n.Z)(e,t);var i=e.prototype;return i.randomRibbonUsedWhenFall=function(){switch(Phaser.Math.Between(0,3)){case 0:default:this.ribbon=this.scene.anims.get(h.RIBBON_A.KEY);break;case 1:this.ribbon=this.scene.anims.get(h.RIBBON_B.KEY);break;case 2:this.ribbon=this.scene.anims.get(h.RIBBON_C.KEY);break;case 3:this.ribbon=this.scene.anims.get(h.RIBBON_D.KEY)}},i.setRibbonPosition=function(t,e){this.points.map((function(i){i.x=t,i.y=e}))},i.createGraphics=function(){var t=[8443204,2928867,12013036,16376097,15285798];this.colorUse=t[Phaser.Math.Between(0,t.length-1)],this.graphics=this.scene.add.graphics({lineStyle:{width:3,color:this.colorUse}});var e=this.emitter.manager,i=e.x,n=e.y,a=e.depth;this.graphics.setDepth(a),this.graphics.setPosition(i,n)},i.update=function(e,i,n){var a=t.prototype.update.call(this,e,i,n);return this.updateColor(),this.updateFrames(e),this.dtCount+=e,this.dtCount<25||(this.dtCount-=25,this.graphics.setAlpha(this.lifeCurrent/this.life),this.alpha=this.lifeCurrent/this.life,this.updatePoints(),this.updateGraphics(),this.updateGravity(),this.updateVelocity()),a},i.updateFrames=function(t){this.lastChange+=t,this.lastChange>=this.ribbon.msPerFrame&&(this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1),this.currentFrame>=this.ribbon.frames.length&&(this.isYoyo=!0,this.currentFrame-=1),this.frame=this.ribbon.frames[this.currentFrame].frame,this.lastChange-=this.ribbon.msPerFrame)},i.updatePoints=function(){this.graphics.visible&&(this.points.shift(),this.points.push({x:this.x,y:this.y}))},i.updateGraphics=function(){if(this.graphics.visible){for(var t,e=ue(this.points);!(t=e()).done;){if(0===t.value.y)return}this.graphics.clear(),this.graphics.strokePoints(this.points)}},i.updateGravity=function(){this.lifeCurrent>this.life-2100||this.isGravityChanged||(this.isGravityChanged=!0,this.graphics.destroy(),this.emitter.setVisible(!0),this.emitter.setGravityY(45))},i.updateVelocity=function(){this.graphics.visible&&(this.velocityX>this.maxVelocityX&&(this.velocityX=this.maxVelocityX),this.velocityX<-this.maxVelocityX&&(this.velocityX=-this.maxVelocityX),this.lifeCurrent>this.life-1800?this.velocityX+=Phaser.Math.Between(-10,10):this.velocityX>0?this.velocityX+=Phaser.Math.Between(-8,6):this.velocityX+=Phaser.Math.Between(-6,8))},i.updateColor=function(){this.graphics.visible||(this.tint=this.colorUse)},i.kill=function(){this.graphics.destroy()},e}(Phaser.GameObjects.Particles.Particle),pe=fe,ve=function(t){function e(e){var i;return(i=t.call(this,e)||this).scene=void 0,i.isYoyo=void 0,i.isGravityChanged=void 0,i.lastChange=void 0,i.currentFrame=void 0,i.star=void 0,i.starX=void 0,i.starY=void 0,i.dtCount=void 0,i.isYoyo=!1,i.isGravityChanged=!1,i.lastChange=0,i.currentFrame=-1,i.scene=e.manager.scene,i.starX=i.scene.anims.get(h.CONFETTI_STAR_X.KEY),i.starY=i.scene.anims.get(h.CONFETTI_STAR_Y.KEY),i.star=i.starX,i.dtCount=0,i}(0,n.Z)(e,t);var i=e.prototype;return i.update=function(e,i,n){var a=t.prototype.update.call(this,e,i,n);return this.updateFrames(e),this.dtCount+=e,this.dtCount<1e3/60||(this.dtCount-=1e3/60,this.updateFrameRate(),this.updateGravity(),this.updateVelocity()),a},i.updateGravity=function(){this.lifeCurrent>this.life-2e3||this.isGravityChanged||(this.isGravityChanged=!0,this.emitter.setGravityY(15),this.emitter.setSpeedX(0))},i.updateVelocity=function(){this.lifeCurrent>this.life-2e3||(this.velocityX>0?this.velocityX+=Phaser.Math.Between(-6,3):this.velocityX+=Phaser.Math.Between(-3,6))},i.updateFrames=function(t){if(this.lastChange+=t,this.lastChange>=this.star.msPerFrame){var e=Phaser.Math.RND.between(0,1);this.star=e>0?this.starX:this.starY,this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1,this.emitter.setAlpha(1)),this.currentFrame>=this.star.frames.length&&(this.isYoyo=!0,this.currentFrame-=1,this.emitter.setAlpha(.8)),this.frame=this.star.frames[this.currentFrame].frame,this.lastChange-=this.star.msPerFrame}},i.updateFrameRate=function(){this.lifeCurrent<this.life-2e3?this.star.msPerFrame=150:this.star.msPerFrame=Phaser.Math.RND.between(300,600)},e}(Phaser.GameObjects.Particles.Particle),Ee=a.Z.EFFECTS,ge=Ee.KEY,Ae=Ee.FRAME,ye=function(t){function e(e){var i;return(i=t.call(this,e,ge,Ae.BLANK)||this).emitterConfetti=void 0,i.emitterRibbons=void 0,i.ribbonConfig=void 0,i.confettiConfig=void 0,i.width=void 0,i.height=void 0,i.emitterRibbons=[],i.emitterConfetti=[],i.createConfigs(),i.createAnimations(),i.scene.add.existing((0,x.Z)(i)),i}(0,n.Z)(e,t);var i=e.prototype;return i.createConfigs=function(){var t=1/GameCore.ImageScale;this.ribbonConfig={on:!1,visible:!1,timeScale:1.5,frame:Ae.BLANK,particleBringToTop:!0,speedY:{min:-480,max:-560},gravityY:290,lifespan:{min:4500,max:5500},rotate:{start:0,end:1800,random:!0},scale:{min:.6*t,max:t},particleClass:pe,maxVelocityX:120},this.confettiConfig={on:!1,delay:200,timeScale:2,tint:[8443204,2928867,12013036,16376097,15285798],particleBringToTop:!0,frame:Ae.PREFIX_ANIMATION_RIBBON_CONFETTI_A+"1",speedY:{min:-460,max:-580},gravityY:280,lifespan:{min:5e3,max:6e3},rotate:{start:0,end:1080},scale:{min:.6*t,max:t},particleClass:ve}},i.createAnimations=function(){if(!this.scene.anims.get(h.CONFETTI_STAR_X.KEY)){var t=new ne(this.scene.anims);this.scene.anims.add(h.CONFETTI_STAR_X.KEY,t)}if(!this.scene.anims.get(h.CONFETTI_STAR_Y.KEY)){var e=new le(this.scene.anims);this.scene.anims.add(h.CONFETTI_STAR_Y.KEY,e)}if(!this.scene.anims.get(h.RIBBON_A.KEY)){var i=new Ct(this.scene.anims);this.scene.anims.add(h.RIBBON_A.KEY,i)}if(!this.scene.anims.get(h.RIBBON_B.KEY)){var n=new Nt(this.scene.anims);this.scene.anims.add(h.RIBBON_B.KEY,n)}if(!this.scene.anims.get(h.RIBBON_C.KEY)){var a=new Gt(this.scene.anims);this.scene.anims.add(h.RIBBON_C.KEY,a)}if(!this.scene.anims.get(h.RIBBON_D.KEY)){var s=new Ht(this.scene.anims);this.scene.anims.add(h.RIBBON_D.KEY,s)}},i.run=function(t,e,i,n){this.setPosition(t,e),this.width=i,this.height=n,this.createEmitters(),this.emitterConfetti.forEach((function(t){t.emitParticle(25)})),this.emitterRibbons.forEach((function(t){t.emitParticle(20)}))},i.stop=function(){var t=this;this.emitterConfetti.forEach((function(t){t.killAll()})),this.emitterRibbons.forEach((function(e){e.killAll(),e.forEachDead((function(t){t instanceof pe&&t.kill()}),t)})),this.kill()},i.createEmitters=function(){this.emitterRibbons=[],this.emitterConfetti=[],this.createConfettiLeftEmitter(),this.createConfettiRightEmitter(),this.createRibbonLeftEmitter(),this.createRibbonRightEmitter()},i.createConfettiLeftEmitter=function(){var t=(0,Et.Z)({},this.confettiConfig,{speedX:{min:5,max:90}}),e=this.createEmitter(t);this.emitterConfetti.push(e)},i.createConfettiRightEmitter=function(){var t=this.width,e=(0,Et.Z)({},this.confettiConfig,{x:t,speedX:{min:-5,max:-90}}),i=this.createEmitter(e);this.emitterConfetti.push(i)},i.createRibbonLeftEmitter=function(){var t=(0,Et.Z)({},this.ribbonConfig,{speedX:{min:20,max:80},emitCallback:function(t){t.setRibbonPosition(0,0)}}),e=this.createEmitter(t);this.emitterRibbons.push(e)},i.createRibbonRightEmitter=function(){var t=this.width,e=(0,Et.Z)({},this.ribbonConfig,{x:t,speedX:{min:-20,max:-80},emitCallback:function(e){e.setRibbonPosition(t,0)}}),i=this.createEmitter(e);this.emitterRibbons.push(i)},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),Te=a.Z.EFFECTS,Pe=Te.KEY,xe=Te.FRAME,Re=function(t){function e(e){var i;return(i=t.call(this,e,Pe,xe.FX_SPARK)||this).deathZone=void 0,i.emitter=void 0,i.createDeathZone(),i.createEmitters(),i.setActive(!1),i.setVisible(!1),i.scene.add.existing((0,x.Z)(i)),i}(0,n.Z)(e,t);var i=e.prototype;return i.createDeathZone=function(){this.deathZone=new Phaser.Geom.Circle},i.createEmitters=function(){var t=1/GameCore.ImageScale;this.emitter=this.createEmitter({on:!1,frame:xe.FX_SPARK,speed:{min:10,max:1200},scale:{start:.8*t,end:0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},deathZone:{source:this.deathZone,type:"onLeave"},lifespan:3e3})},i.explode=function(t,e,i,n){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=n,this.deathZone.setPosition(e,i),this.emitter.explode(t,e,i)},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),Ce=a.Z.EFFECTS,Fe=Ce.KEY,be=Ce.FRAME,Ze=function(t){function e(e){var i;return(i=t.call(this,e,Fe,be.FX_STAR_YELLOW)||this).emitZone=void 0,i.timeScaleTween=void 0,i.emitter=void 0,i.scene=e,i.createEmitZone(),i.scene.add.existing((0,x.Z)(i)),i}(0,n.Z)(e,t);var i=e.prototype;return i.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},i.createEmitters=function(){var t=1/GameCore.ImageScale;this.emitter=this.createEmitter({on:!1,frame:be.FX_STAR_YELLOW,tint:[16449272,10471662,16381924,14663817],emitZone:{source:this.emitZone},reserve:3,timeScale:1,frequency:10,maxParticles:300,speedY:{min:-100,max:-350},alpha:{start:.2,end:1},scale:{start:.6*t,end:.1*t},lifespan:{min:5e3,max:1e4}})},i.run=function(t,e,i,n,a){this.stop(),this.reset(),this.emitZone.setSize(n,a),this.emitZone.setPosition(e-n/2,i-a/2),this.emitter.setQuantity(t),this.emitter.start(),this.runTimeScaleAnimation()},i.stop=function(){var t,e,i;null==(t=this.timeScaleTween)||t.stop(),null==(e=this.emitter)||e.killAll(),null==(i=this.emitter)||i.stop()},i.reset=function(){this.createEmitters()},i.runTimeScaleAnimation=function(){this.timeScaleTween?this.timeScaleTween.restart():this.timeScaleTween=this.scene.tweens.add({targets:[this.emitter],duration:2e3,ease:Phaser.Math.Easing.Quartic.In,props:{frequency:{from:1,to:200},timeScale:{from:20,to:1}}})},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),Oe=i(56),Se=a.Z.EFFECTS,_e=Se.KEY,Ie=Se.FRAME,Ne=function(t){function e(e){var i;return(i=t.call(this,e,_e,Ie.FX_SPARK_YELLOW)||this).emitZone=void 0,i.emitter=void 0,i.createEmitZone(),i.createEmitters(),i.scene.add.existing((0,x.Z)(i)),i}(0,n.Z)(e,t);var i=e.prototype;return i.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},i.createEmitters=function(){var t=1/GameCore.ImageScale;this.emitter=this.createEmitter({frame:Ie.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},frequency:200,speedX:{min:-1,max:1},speedY:{min:-9,max:-13},lifespan:{min:1e3,max:1500},scale:{min:.01,max:.015},emitCallback:function(e){e.setScale({min:t/4,max:t})},particleClass:Oe.Z})},i.run=function(t,e,i,n,a){this.stop(),this.emitZone.setSize(n,a),this.emitZone.setPosition(e-n/2,i-a/2),this.emitter.setQuantity(t),this.emitter.start()},i.stop=function(){var t,e;null==(t=this.emitter)||t.killAll(),null==(e=this.emitter)||e.stop()},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),we=i(83),Be=i(82),Me=a.Z.EFFECTS,Ye=Me.KEY,Xe=Me.FRAME,ke=function(t){function e(e){var i;return(i=t.call(this,e,Ye,Xe.FX_STAR_YELLOW)||this).emitZone=void 0,i.emitter=void 0,i.scene=e,i.createEmitZone(),i.scene.add.existing((0,x.Z)(i)),i}(0,n.Z)(e,t);var i=e.prototype;return i.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},i.createEmitters=function(){var t=1/GameCore.ImageScale;this.emitter=this.createEmitter({on:!1,frame:Xe.FX_STAR_WHITE,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:80,maxParticles:15,scale:{start:0,end:1*t,ease:Phaser.Math.Easing.Bounce.Out},lifespan:400})},i.run=function(t,e,i,n,a){this.stop(),this.reset(),this.emitZone.setSize(n,a),this.emitZone.setPosition(e-n/2,i-a/2),this.emitter.setQuantity(t),this.emitter.start()},i.explode=function(t,e,i,n,a){this.stop(),this.reset(),this.emitZone.setSize(n,a),this.emitZone.setPosition(-n/2,-a/2),this.emitter.explode(t,e,i)},i.stop=function(){var t,e;null==(t=this.emitter)||t.killAll(),null==(e=this.emitter)||e.stop()},i.reset=function(){this.createEmitters()},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),De=a.Z.EFFECTS,Ge=De.KEY,Ke=De.FRAME,Le=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation1=void 0,this.animation2=void 0,this.run=function(){var t=new y.Z({targets:[e.scene.source],delay:250,duration:600,ease:"Back.easeInOut",props:{scale:1,y:{from:500,to:200}}});null==t||t.play(),t.next(e.runStarTwinkle),e.animation1=t},this.stop=function(){var t;e.animation1.stop(),null==(t=e.animation2)||t.stop(),e.scene.alignObjects()},this.runStarTwinkle=function(){var t=new we.Z(e.scene),i=e.scene.source,n=i.x,a=i.y,s=i.displayWidth,r=i.displayHeight;t.run(1,n,a,s,r),e.animation2=t},this.scene=t,this.name="SlideToTopAnimation"},je=function(t){var e=this;this.scene=void 0,this.name=void 0,this.confetti1=void 0,this.confetti2=void 0,this.run=function(){var t=e.scene,i=new Phaser.Geom.Rectangle(0,0,375,200),n=new it.Z(t,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0},emitZone:{source:i,type:"random"}}),a=new it.Z(t,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),s=t.gameZone.width;n.run(10,0,0),a.run(10,s,0),e.confetti1=n,e.confetti2=a},this.stop=function(){var t,i,n,a;null==(t=e.confetti1)||t.stop(),null==(i=e.confetti2)||i.stop(),null==(n=e.confetti1)||n.kill(),null==(a=e.confetti2)||a.kill()},this.scene=t,this.name="ConfettiSmallAnimation"},Ue=function(t){var e=this;this.scene=void 0,this.name=void 0,this.confetti=void 0,this.run=function(){var t=e.scene,i=new et(t),n=t.target,a=n.x,s=n.y;i.run(2,a,s),e.confetti=i},this.stop=function(){e.confetti.stop(),e.confetti.kill()},this.scene=t,this.name="ConfettiHexagonAnimation"},Ve=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){var t=e.scene;e.animation||(e.animation=new M(t));var i=t.source,n=i.x,a=i.y;e.animation.explode(10,n,a)},this.stop=function(){e.animation.pause(),e.animation.kill()},this.scene=t,this.name="StarExplosive"},We=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){var t=e.scene,i=new lt(t);i.explode(20,t.source.x,t.source.y),e.animation=i},this.stop=function(){e.animation.pause(),e.animation.kill()},this.scene=t,this.name="DiamondsExplosive"},ze=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){var t=e.scene,i=new Re(t);i.explode(100,t.source.x,t.source.y,180),e.animation=i},this.stop=function(){e.animation.pause(),e.animation.kill()},this.scene=t,this.name="SparksExplosive"},He=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){var t=e.scene,i=new we.Z(t),n=t.source,a=n.x,s=n.y,r=n.displayWidth,o=n.displayHeight;i.run(1,a,s,r,o),e.animation=i},this.stop=function(){e.animation.pause(),e.animation.kill()},this.scene=t,this.name="SparksIdle"},qe=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){var t=e.scene,i=new Be.Z(t),n=t.source,a=n.x,s=n.y,r=n.displayWidth,o=n.displayHeight;i.run(1,a,s,r,o),e.animation=i},this.stop=function(){e.animation.pause(),e.animation.kill()},this.scene=t,this.name="StarTwinkleUp"},Qe=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){var t=e.scene,i=new ke(t),n=t.source,a=n.x,s=n.y,r=n.displayWidth,o=n.displayHeight;i.run(1,a,s,r,o),e.animation=i},this.stop=function(){e.animation.pause(),e.animation.kill()},this.scene=t,this.name="StarWhiteTwinkle"},$e=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){var t=e.scene,i=new q(t),n=t.source,a=n.x,s=n.y,r=n.displayWidth,o=n.displayHeight;i.run(1,a,s,r,o),e.animation=i},this.stop=function(){e.animation.pause(),e.animation.kill()},this.scene=t,this.name="CometTwinkle"},Je=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){var t=e.scene,i=new P.Z(t);Phaser.Display.Align.In.Center(t.source,t.gameZone),Phaser.Display.Align.In.Center(i,t.source),i.run(),e.animation=i},this.stop=function(){e.animation.kill(),e.scene.alignObjects()},this.scene=t,this.name="BigStarExplosive"},ti=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){var t=e.scene,i=new Ze(t),n=t.gameZone,a=n.width,s=n.height;i.run(1,a/2,s,a,s),e.animation=i},this.stop=function(){e.animation.stop(),e.animation.kill()},this.scene=t,this.name="StarsFlyUp"},ei=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){var t=e.scene,i=new g.Z({targets:[t.source]});i.play(),e.animation=i},this.stop=function(){e.animation.stop(),e.scene.alignObjects()},this.scene=t,this.name="ShakeHorizontal"},ii=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation1=void 0,this.animation2=void 0,this.animation3=void 0,this.run=function(){var t=e.scene,i=t.target,n=i.x,a=i.y,s=t.source,r={x:s.x,y:s.y},o={x:n,y:a};t.objects.setVisible(!1);var h=new q(t),c=new T.Z({targets:[t.objects.getChildren()[0]],delay:t.tweens.stagger(80,{}),duration:Phaser.Math.RND.between(1e3,2500),curve:[[r.x,r.y],[r.x-Phaser.Math.RND.between(-250,250),r.y-Phaser.Math.RND.between(-40,40)],[o.x,o.y]],onComplete:function(){t.objects.setVisible(!1),e.run(),e.runSparksExplosive()},onCurveUpdate:function(t){var e=t.x+Phaser.Math.RND.between(-16,16),i=t.y+Phaser.Math.RND.between(-16,16);h.explode(1,e,i)}});c.play(),e.animation1=h,e.animation2=c},this.stop=function(){var t,i,n,a,s;null==(t=e.animation1)||t.stop(),null==(i=e.animation1)||i.kill(),null==(n=e.animation2)||n.stop(),null==(a=e.animation3)||a.pause(),null==(s=e.animation3)||s.kill()},this.runSparksExplosive=function(){var t=e.scene,i=new Re(t);i.explode(100,t.target.x,t.target.y,180),e.animation3=i},this.scene=t,this.name="CurveAnimation"},ni=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){var t=e.scene,i=t.make.image({key:Ge,frame:Ke.FX_CIRCLE_LIGHT});i.setWorldSize(75.5,75),i.setPosition(t.source.x,t.source.y);var n=1/GameCore.ImageScale,a=new A.Z({targets:[i],duration:800,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:2*n,alpha:0},onStop:function(){i.kill()}});a.play(),e.animation=a},this.stop=function(){e.animation.stop()},this.scene=t,this.name="StarTouchAnimation"},ai=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){if(!e.animation){var t=e.scene.target,i=t.x,n=t.y;e.animation=new I(e.scene,i,n)}var a=e.scene.source,s=a.x,r=a.y;e.animation.explode(15,s,r)},this.stop=function(){},this.scene=t,this.name="CoinsExplosive"},si=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){e.animation||(e.animation=new V(e.scene));var t=e.scene.source,i=t.x,n=t.y,a=e.scene.target,s=a.x,r=a.y;e.animation.explode(15,i,n,s,r)},this.stop=function(){},this.scene=t,this.name="CoinsExplosive2"},ri=function(t){var e=this;this.scene=void 0,this.name=void 0,this.timer=void 0,this.animation=void 0,this.run=function(){var t;e.animation=new vt(e.scene);var i=Phaser.Math.Between(0,375),n=Phaser.Math.Between(0,620);e.animation.explode(100,i,n,90),null==(t=e.timer)||t.remove(),e.timer=e.scene.time.addEvent({delay:Phaser.Math.Between(100,800),callback:e.run})},this.stop=function(){var t;null==(t=e.timer)||t.remove()},this.scene=t,this.name="PaperFireworkExplosive"},oi=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){var t;null==(t=e.animation)||t.destroy(),e.animation=new ot(e.scene,{speedY:{min:-12,max:-200},rotate:{start:0,end:1080},angle:{min:320,max:355}});var i=e.scene.source,n=i.x,a=i.y;e.animation.explode(100,n,a)},this.stop=function(){},this.scene=t,this.name="ConfettiSmallFly"},hi=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){e.animation||(e.animation=new ye(e.scene)),e.animation.run(0,e.scene.gameZone.height,375,200)},this.stop=function(){},this.scene=t,this.name="PaperFireworksCelebration"},ci=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){e.animation||(e.animation=new D(e.scene));var t=e.scene.source,i=t.x,n=t.y;e.animation.explode(12,i,n)},this.stop=function(){},this.scene=t,this.name="StarsExplosiveSmall"},mi=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){e.animation||(e.animation=new ut.Z(e.scene));var t=e.scene.target,i=t.x,n=t.y,a=t.displayWidth,s=t.displayHeight;e.animation.run(1,i,n,2*a,s)},this.stop=function(){e.animation.stop()},this.scene=t,this.name="FallingStarSparkle"},li=function(t){var e=this;this.scene=void 0,this.name=void 0,this.animation=void 0,this.run=function(){e.animation||(e.animation=new Ne(e.scene));var t=e.scene.target,i=t.x,n=t.y,a=t.displayWidth,s=t.displayHeight;e.animation.run(1,i,n,2*a,s)},this.stop=function(){e.animation.stop()},this.scene=t,this.name="StarSparkle"},ui=i(85),di=i(14),fi=i(81),pi=i(76),vi=a.Z.DEFAULT,Ei=vi.KEY,gi=vi.FRAME,Ai=function(t){function e(e,i){var n,a=e.textures.exists(i);return(n=t.call(this,e,{key:a?i:Ei,frame:a?"":gi.BLANK,width:160,height:120})||this).animationNameStr=void 0,n.animationName=void 0,n.updateSize(),n.createText(a?Ei:i||""),n.scene.children.bringToTop((0,x.Z)(n)),!a&&n.loadImage(i),n}(0,n.Z)(e,t);var i=e.prototype;return i.createText=function(t){this.animationNameStr=t;var e=this.scene.make.bitmapText({font:di.ZP.PRIMARY.KEY,size:this.scene.fontSize(14),text:this.normalizeText(t),origin:{x:.5,y:0}});e.setPosition(0,this.button.height/2),e.setCenterAlign(),e.setMaxWidth(this.button.width,95),this.animationName=e,this.add([e])},i.normalizeText=function(t){return t.replace(/\.?([A-Z]+)/g,"_$1").replace(/^_/,"")},i.loadImage=function(t){var e=this,i=this.scene.load.image(t,"./assets/animation-thumbnails/"+t+".png");this.scene.load.start(),i.on("filecomplete",(function(i){if(i===t){var n=e.button,a=n.width,s=n.height;e.createButton(i,"",a-6,s-6),e.bringToTop(e.animationName)}}))},i.getName=function(){return this.normalizeText(this.animationNameStr)},e}(pi.Z),yi=function(t){function e(e){var i,n=e.gameZone,a=n.width,s=n.height,r={listConfigs:[],width:a,height:s};(i=t.call(this,e,r)||this).scene=void 0,i.nextItemPos=void 0,i.animationButtons=[],i.openAnimationScrollerButton=void 0,i.currentAnimation=void 0,i.currentAnimationText=void 0,i.background=void 0,i.openScroller=function(){var t;null==(t=i.currentAnimation)||t.stop(),i.revive(),i.currentAnimationText.kill(),i.openAnimationScrollerButton.kill(),i.background.revive()},i.closeScroller=function(){i.background.kill(),i.currentAnimationText.revive(),i.openAnimationScrollerButton.revive(),i.kill()},i.runCurrentAnim=function(){i.currentAnimation&&(i.currentAnimation.stop(),i.currentAnimation.run())},i.scene=e;return i.nextItemPos={x:0,y:-s/2,offsetX:-a/4-5},i.setPosition(187.5,333.5),i.setEnable(!0),i.createBackground(a,s),i.createOpenButton(),i.createCurrentAnimationText(),i.closeScroller(),i}(0,n.Z)(e,t);var i=e.prototype;return i.createBackground=function(t,e){this.background=this.scene.make.image({key:a.Z.DEFAULT.KEY,frame:a.Z.DEFAULT.FRAME.BLANK}),this.background.setOrigin(0,0),this.background.setTint(859421),this.background.setWorldSize(t,e),this.scene.children.bringToTop(this),this.background.kill()},i.createOpenButton=function(){var t=a.Z.DEFAULT,e=t.KEY,i=t.FRAME,n=new ui.Z(this.scene,{key:e,button:i.BUTTON_BLUE,icon:i.BLANK,text:"     Menu"},148,60);n.setPosition(0,50),n.kill(),this.openAnimationScrollerButton=n,this.openAnimationScrollerButton.onClick=this.openScroller},i.createCurrentAnimationText=function(){this.currentAnimationText=this.scene.make.bitmapText({font:di.ZP.PRIMARY.KEY,size:this.scene.fontSize(18),text:"",origin:{x:.5,y:0}},!0),this.currentAnimationText.setMaxWidth(300,95),this.currentAnimationText.setCenterAlign(),Phaser.Display.Align.In.TopCenter(this.currentAnimationText,this.scene.gameZone,0,-50)},i.addButton=function(e){var i=this,n=this.nextItemPos,a=n.x,s=n.y,r=n.offsetX,o=new Ai(this.scene,e.name);o.setPosition(a+r,s+o.height/2+34),this.nextItemPos.offsetX=-r,r>0&&(this.nextItemPos.y+=o.height+34),this.animationButtons.push(o),o.onClick=function(){var t;i.closeScroller(),null==(t=i.currentAnimation)||t.stop(),e.run(),i.currentAnimation=e,i.currentAnimationText.setText(o.getName())},t.prototype.addItem.call(this,o)},e}(fi.Z),Ti=yi,Pi=a.Z.EFFECTS,xi=Pi.KEY,Ri=Pi.FRAME,Ci=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).target=void 0,e.source=void 0,e.objects=void 0,e.scroller=void 0,e}(0,n.Z)(e,t);var i=e.prototype;return i.preload=function(){this.textures.removeKey(a.Z.EFFECTS.KEY),this.load.multiatlas({key:a.Z.ANIMATION_SCENE.KEY,path:a.Z.ANIMATION_SCENE.PATH,atlasURL:a.Z.ANIMATION_SCENE.JSON})},i.create=function(){t.prototype.create.call(this),this.createBackground(xi,Ri.BLANK,859421),this.createTargetObject(),this.createSourceObject(),this.createMultiObjects(),this.createSpriteAnimations(),this.createAnimationScroller(),this.alignObjects();var e=Phaser.Input.Events.POINTER_DOWN;this.gameZone.setInteractive().on(e,this.scroller.runCurrentAnim)},i.createAnimationScroller=function(){var t=new Ti(this);t.addButton(new Je(this)),t.addButton(new ai(this)),t.addButton(new si(this)),t.addButton(new $e(this)),t.addButton(new Ue(this)),t.addButton(new je(this)),t.addButton(new oi(this)),t.addButton(new ii(this)),t.addButton(new We(this)),t.addButton(new mi(this)),t.addButton(new ri(this)),t.addButton(new hi(this)),t.addButton(new ei(this)),t.addButton(new Le(this)),t.addButton(new ze(this)),t.addButton(new He(this)),t.addButton(new Ve(this)),t.addButton(new ci(this)),t.addButton(new ti(this)),t.addButton(new li(this)),t.addButton(new ni(this)),t.addButton(new qe(this)),t.addButton(new Qe(this)),this.scroller=t},i.createTargetObject=function(){this.target=this.make.image({key:xi,frame:Ri.BLANK}),this.target.setTint(5162135),this.target.setWorldSize(50,50)},i.createSourceObject=function(){this.source=this.make.image({key:xi,frame:Ri.BLANK}),this.source.setTint(4824278),this.source.setWorldSize(50,50)},i.createMultiObjects=function(){this.objects=this.make.group({repeat:10,key:xi,frame:Ri.BLANK,classType:Phaser.GameObjects.Image,createMultipleCallback:function(t){t.forEach((function(t){t.setSize(80,80)}))}}),this.objects.setTint(12433838),this.objects.setVisible(!1)},i.createSpriteAnimations=function(){var t=new v(this.anims);this.anims.add(h.CONFETTI_HEXAGON.KEY,t)},i.alignObjects=function(){Phaser.Display.Align.In.TopCenter(this.target,this.gameZone,0,-100),Phaser.Display.Align.In.BottomCenter(this.source,this.gameZone,0,-150)},e}(E.Z);var Fi=Ci}}]);